
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RethinkDB &#8212; notes</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/vollkorn.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/_static/styles.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using MongoDB and Python" href="lang-drivers/py-mongo.html" />
    <link rel="prev" title="Using MongoDB" href="mongo-db.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../titlepage.html">
   notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Systems
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../nix-systems/index.html">
   *nix Systems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-installations.html">
     Software installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-sysadmin.html">
     System administration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-filesystem.html">
     Disk and filesystem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-networks.html">
     Networks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-hardware.html">
     Hardware
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/boot-bios.html">
     Boot Loaders and BIOS control
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/systemd.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       systemd
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       journald
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/kernel.html">
     Linux Kernel Modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../bash/index.html">
   Bash scripting
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../bash/bash-reference.html">
     Bash reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bash/bash-cookbook.html">
     Bash cookbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../osx-reference.html">
   OSX Reference
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Programming Languages
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cpp/index.html">
   C++ and C
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/declarations.html">
     Declarations in C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/conan.html">
     Conan package manager
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/unit-testing.html">
     Unit testing with Catch2! and Trompeloeil
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/swig-cmake.html">
     Using SWIG with CMake
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/cmake.html">
     CMake notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/member-functions.html">
     On using
     <code class="docutils literal notranslate">
      <span class="pre">
       std::function
      </span>
     </code>
     for member functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../julia/index.html">
   Julia Notes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/julia-intro.html">
     Julia learning notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/advent-notes/README.html">
     Advent of Code notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/advent-notes/scopes.html">
     Julia Scopes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/py-recipes.html">
     Python recipes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/jupyter-ipython.html">
     Jupyter and iPython cheat sheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/regex.html">
     Regex in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/py-serial.html">
     Serial communication with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/high-perf.html">
     High performance Python techniques and paradigms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/c-wrapping.html">
     Wrapping C and C++ into Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/pypi-distribution.html">
     Making a project available on pypi
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/cpp-c-swig.html">
     Wrapping C/C++ code using SWIG
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/requests.html">
     Python
     <code class="docutils literal notranslate">
      <span class="pre">
       requests
      </span>
     </code>
     cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/using-flask.html">
     Using Python Flask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/rethink-db-with-flask.html">
     Using RethinkDB with Flask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/jinja-templating.html">
     Templating HTML pages with jinja
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/fast-api/using-fast-api.html">
     Using FastAPI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/mkdocs-notes.html">
     Notes on mkdocs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/scrapy.html">
     Scrapy
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../js/index.html">
   JavaScript
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/jest-testing.html">
     Using Jest testing framework
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/js-reference.html">
     JavaScript language reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/swig-nodejs.html">
     Using SWIG with NodeJS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/request-parsing.html">
     Making HTTP requests and parsing in JS and node.js
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/extensions/native-messaging.html">
     Native Messaging for Browser Extensions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/vue/over-vue.html">
     Vue Overview
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tex/index.html">
   LaTeX
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/latex-documents.html">
     Writing LaTeX documents
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/latexmk.html">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       latexmk
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/presentations.html">
     Making presentations in LaTeX
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/posters.html">
     Creating posters in LaTeX
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  DevOps
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docker/index.html">
   Docker
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/minio-registry.html">
     Creating a persistent local registry with S3/MinIO
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-cheatsheet.html">
     Docker cheatsheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/systemd-with-docker.html">
     Using Docker as
     <code class="docutils literal notranslate">
      <span class="pre">
       systemd
      </span>
     </code>
     services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-compose.html">
     The magical world of Docker-Compose
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/dockerfile-recipes.html">
     Dockerfile cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-swarm.html">
     Docker Swarm
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../aws/index.html">
   Amazon Web Services
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/vpc-overview.html">
     VPC overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/setting-up.html">
     AWS Settup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/ec2-with-docker.html">
     EC2 with Docker
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/goofys-s3.html">
     Using Goofys with S3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vms/index.html">
   Virtual Machines
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/sun-virtual-box.html">
     Oracle Virtual Box
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/kvm.html">
     Kernel-based Virtual Machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/qemu.html">
     QEMU
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Databases
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="node-red.html">
     NodeRed Notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="mongo-db.html">
     Using MongoDB
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     RethinkDB
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lang-drivers/py-mongo.html">
     Using MongoDB and Python
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Configurations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../configurations/shell-rc-profiles.html">
   Shell
   <code class="docutils literal notranslate">
    <span class="pre">
     .*rc
    </span>
   </code>
   and
   <code class="docutils literal notranslate">
    <span class="pre">
     .*profile
    </span>
   </code>
   configurations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../configurations/jupyter-notebook.html">
   Jupyter notebook
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../machine-learning/index.html">
   Machine Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../machine-learning/tf-install.html">
   Installing TensorFlow 2.0
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Raspi &amp; Arduino
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../raspi/index.html">
   Raspberry Pi
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/raspi-config.html">
     Configuring a Raspberry Pi from fresh install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/raspi-bit-torrent.html">
     Setting up a Raspberry-Pi for secure bit torrenting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/pyaudio.html">
     Installing PyAudio on Raspberry Pi
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../arduino/index.html">
   Arduino
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../arduino/platformio.html">
     PlatformIO notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../arduino/ca-certs-nano.html">
     Copying (root) CA certificates onto Arduino devices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../arduino/arduino-cookbook.html">
     Arduino cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../arduino/crypto-auth.html">
     Using the ECC0X08 with Arduino devices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mq-mqtt/mqtt-specs.html">
     MQTT Specifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mq-mqtt/nginx-load-balancing.html">
     Using NGiNX with Docker
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tools
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vim/index.html">
   VIM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/recipes.html">
     Vim Recipes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/vundle.html">
     Vundle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/batch-rename.html">
     Batch renaming in Vim
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../discord/index.html">
   Discord
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../discord/making-bots-python.html">
     Making Discord bots in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../discord/discord-music-hook.html">
     Creating a Discord music feed using webhooks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../git/index.html">
   Git and VCs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../git/git-reference.html">
     Git Reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../git/gitea-mariadb.html">
     Using Gitea with MariaDB
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vscode/index.html">
   VSCode
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vscode/publishing.html">
     Publishing a VSCode extension
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../recommended-talks.html">
   Recommended talks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software-design-principles.html">
   Software Design Principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ffmpeg-cheatsheet.html">
   FFMPEG Cheatsheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../iptables-and-firewalls.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     iptables
    </span>
   </code>
   and firewall configuration reference.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ci-cd/jenkins-recipes.html">
   Jenkins Cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../security/openssl-cookbook.html">
   OpenSSL Cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualisation/blender-learning.html">
   Learning Blender
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../java/gradle-cookbook.html">
   Gradle build-tool cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../automation/mycroft-osx.html">
   Using Mycroft Docker images on OSX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nix-systems/clamav.html">
   Clam Anti-Virus
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/databases/rethink-db.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fjebaker/notes"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fjebaker/notes/issues/new?title=Issue%20on%20page%20%2Fdatabases/rethink-db.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fjebaker/notes/edit/master/databases/rethink-db.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-storage-format">
     Data storage format
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rethinkdb-with-docker">
   RethinkDB with Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reql-query-language">
   ReQL Query Language
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples">
     Examples
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#functional">
       Functional
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#composable">
       Composable
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#subqueries">
       Subqueries
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#expressions">
       Expressions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#regex">
       Regex
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#connection">
     Connection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-involved-concepts">
     More involved concepts
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#geospatial-use-and-geoemtry">
   Geospatial use and geoemtry
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-types">
     Data types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#users-and-permissions">
   Users and permissions
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>RethinkDB</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-storage-format">
     Data storage format
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rethinkdb-with-docker">
   RethinkDB with Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reql-query-language">
   ReQL Query Language
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples">
     Examples
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#functional">
       Functional
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#composable">
       Composable
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#subqueries">
       Subqueries
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#expressions">
       Expressions
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#regex">
       Regex
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#connection">
     Connection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#more-involved-concepts">
     More involved concepts
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#geospatial-use-and-geoemtry">
   Geospatial use and geoemtry
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-types">
     Data types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#users-and-permissions">
   Users and permissions
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="rethinkdb">
<h1>RethinkDB<a class="headerlink" href="#rethinkdb" title="Permalink to this headline">¶</a></h1>
<p>RethinkDB is a JSON store, real-time database, optimized for continuously updating queries when new data is available. As such, it is fantastic for monitoring purposes, interactive data, marketplaces, streaming, and web delivery. As described in their <a class="reference external" href="https://rethinkdb.com/faq">FAQ</a>:</p>
<blockquote>
<div><p>instead of polling for changes, the developer can tell RethinkDB to continuously push updated query results to applications in realtime</p>
</div></blockquote>
<p>The query language is derivative of NoSQL.</p>
<!--BEGIN TOC-->
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><a class="reference external" href="#overview">Overview</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#data-storage-format">Data storage format</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#rethinkdb-with-docker">RethinkDB with Docker</a></p></li>
<li><p><a class="reference external" href="#reql-query-language">ReQL Query Language</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#examples">Examples</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#functional">Functional</a></p></li>
<li><p><a class="reference external" href="#composable">Composable</a></p></li>
<li><p><a class="reference external" href="#subqueries">Subqueries</a></p></li>
<li><p><a class="reference external" href="#expressions">Expressions</a></p></li>
<li><p><a class="reference external" href="#regex">Regex</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#connection">Connection</a></p></li>
<li><p><a class="reference external" href="#more-involved-concepts">More involved concepts</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#geospatial-use-and-geoemtry">Geospatial use and geoemtry</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#data-types">Data types</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#users-and-permissions">Users and permissions</a></p></li>
</ol>
<!--END TOC-->
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Languages supported</p>
<ul class="simple">
<li><p><a class="reference external" href="https://rethinkdb.com/api/javascript/">JavaScript</a></p></li>
<li><p><a class="reference external" href="https://rethinkdb.com/api/python/">Python</a></p></li>
<li><p><a class="reference external" href="https://rethinkdb.com/api/ruby/">Ruby</a></p></li>
<li><p><a class="reference external" href="https://rethinkdb.com/api/java/">Java</a></p></li>
</ul>
<p>Client drivers connect to <strong>port 28015</strong>. Web UI present on <strong>port 8080</strong>.</p>
<div class="section" id="data-storage-format">
<h3>Data storage format<a class="headerlink" href="#data-storage-format" title="Permalink to this headline">¶</a></h3>
<p>By default, RethinkDB uses <code class="docutils literal notranslate"><span class="pre">id</span></code> as the attribute for primary keys, which is auto-incremented.</p>
</div>
</div>
<div class="section" id="rethinkdb-with-docker">
<h2>RethinkDB with Docker<a class="headerlink" href="#rethinkdb-with-docker" title="Permalink to this headline">¶</a></h2>
<p>Pull the latest image from the docker hub with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull rethinkdb
</pre></div>
</div>
<p>and start the database with a mounted volume for data, and a bound port for access:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run <span class="se">\</span>
	--name rtdb <span class="se">\</span>
	-p <span class="m">8080</span>:8080 <span class="se">\</span>
  -p <span class="m">28015</span>:28015 <span class="se">\</span>
  -p <span class="m">29015</span>:29015 <span class="se">\</span>
	-v data:/data <span class="se">\</span>
	-d <span class="se">\</span>
	rethinkdb
</pre></div>
</div>
<p>You can then connect to <a class="reference external" href="http://localhost:8080/"><code class="docutils literal notranslate"><span class="pre">http://localhost:8080/</span></code></a> to access the UI and admin features.</p>
</div>
<div class="section" id="reql-query-language">
<h2>ReQL Query Language<a class="headerlink" href="#reql-query-language" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://rethinkdb.com/docs/introduction-to-reql/">RethinkDB Query Language</a> is described to differ from other NoSQL languages in the sense that is embedded into a programming language. All queries are <strong>simply constructed</strong>, they are <strong>chainable</strong> and they execute <strong>on the server</strong>.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>In the following section, I will include Python examples:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rethinkdb</span> <span class="kn">import</span> <span class="n">RethinkDB</span> <span class="c1"># import the RethinkDB package</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">RethinkDB</span><span class="p">()</span>                 <span class="c1"># create a RethinkDB object</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>              <span class="c1"># connect to the server on localhost and default port</span>
</pre></div>
</div>
<p>Queries are constructed to be lazy, and to be compatible with parallelism for quicker execution. The laziness is to say a query such as</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">has_fields</span><span class="p">(</span><span class="s1">&#39;album&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>will only accumulate 5 items before the query execution stops, as opposed to executing the full query and returning 5 items.</p>
<p>Serverside execution means the queries may also be stored for quick reuse:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># get distinct artists</span>
<span class="n">distinct_lastnames_query</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pluck</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span>

<span class="c1"># Send it to the server and execute</span>
<span class="n">distinct_lastnames_query</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="functional">
<h4>Functional<a class="headerlink" href="#functional" title="Permalink to this headline">¶</a></h4>
<p>Queries may also be functional, such as</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span> <span class="n">song</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>There are limitations to the types of functions that may be passed – for example, <code class="docutils literal notranslate"><span class="pre">print</span></code> statements cannot be invoked, and <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">for</span></code> statements must be replaced with a ReQL command</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span>
    <span class="n">r</span><span class="o">.</span><span class="n">branch</span><span class="p">(</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="composable">
<h4>Composable<a class="headerlink" href="#composable" title="Permalink to this headline">¶</a></h4>
<p>ReQL queries are composable, in the sense that multiple may be combined, and JS code executed</p>
<blockquote>
<div><p>RethinkDB supports server-side JavaScript evaluation using the embedded V8 engine (sandboxed within outside processes, of course):</p>
</div></blockquote>
<p>For example</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;1 + 1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>would evaluate the JS expression <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span></code> server side. As such, the functional syntax can be extended to use JS functions</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">js</span><span class="p">(</span><span class="s1">&#39;(function (song) { return song.duration &gt; 60; })&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="subqueries">
<h4>Subqueries<a class="headerlink" href="#subqueries" title="Permalink to this headline">¶</a></h4>
<p>Subqueries are also supported, such as a query to select all songs from artists who are in the <code class="docutils literal notranslate"><span class="pre">history</span></code> table:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span>
    <span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;history&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pluck</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">song</span><span class="o">.</span><span class="n">pluck</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">)))</span><span class="o">.</span>
    <span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>This allows for very complex queries to be easily constructed.</p>
</div>
<div class="section" id="expressions">
<h4>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h4>
<p>Expressions are also supported. Here is a query which will search the <code class="docutils literal notranslate"><span class="pre">songs</span></code> table for all songs with more up-votes than down-votes, and subsequently increase the rating of the song by 1:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span> <span class="n">song</span><span class="p">[</span><span class="s1">&#39;upvotes&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;downvotes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
 <span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="n">song</span><span class="p">[</span><span class="s1">&#39;rating&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">})</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>For more, see the full <a class="reference external" href="https://rethinkdb.com/api/python/">Python API reference</a>.</p>
</div>
<div class="section" id="regex">
<h4>Regex<a class="headerlink" href="#regex" title="Permalink to this headline">¶</a></h4>
<p>You can <a class="reference external" href="https://rethinkdb.com/api/python/match">use regex in queries</a> by using a <code class="docutils literal notranslate"><span class="pre">.match()</span></code> function call in the lambda:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">song</span><span class="p">:</span>
    <span class="n">song</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;ing$&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="connection">
<h3>Connection<a class="headerlink" href="#connection" title="Permalink to this headline">¶</a></h3>
<p>For exploratory and interactive purposes, when creating a connection you can also call <code class="docutils literal notranslate"><span class="pre">.repl()</span></code> to ensure the connection is kept alive, and to avoid calling <code class="docutils literal notranslate"><span class="pre">.run(conn)</span></code> at the end of each query. See <a class="reference external" href="https://rethinkdb.com/api/python/repl/">this section of the documentation</a>.</p>
</div>
<div class="section" id="more-involved-concepts">
<h3>More involved concepts<a class="headerlink" href="#more-involved-concepts" title="Permalink to this headline">¶</a></h3>
<p>Notes for the future on</p>
<ul class="simple">
<li><p>using <a class="reference external" href="https://rethinkdb.com/docs/map-reduce/">map-reduce</a></p></li>
<li><p><a class="reference external" href="https://rethinkdb.com/docs/table-joins/">table joins</a></p></li>
<li><p>more on <a class="reference external" href="https://rethinkdb.com/blog/lambda-functions/">lambda functions</a></p></li>
</ul>
</div>
</div>
<div class="section" id="geospatial-use-and-geoemtry">
<h2>Geospatial use and geoemtry<a class="headerlink" href="#geospatial-use-and-geoemtry" title="Permalink to this headline">¶</a></h2>
<p>Adapted mainly from information in the <a class="reference external" href="https://rethinkdb.com/docs/geo-support/javascript/">JS API on geospatial queries</a>.</p>
<p>RethinkDB has native support for handling geometric data. Geoemtry objects are points mapped onto a sphere. Distances are calculated by RethinkDB as geodesics on a sphere. The data is by default interpreted as <strong>latitude and longitude</strong> (reverse order from e.g. Google maps) points:</p>
<blockquote>
<div><p>RethinkDB supports the WGS84 World Geodetic System’s reference ellipsoid and geographic coordinate system (GCS)</p>
</div></blockquote>
<p>ReQL objects may be <a class="reference external" href="https://rethinkdb.com/docs/geo-support/javascript/#using-geojson">converted to GeoJSON</a> and vice-versa.</p>
<p>To specify a table as containing geometric data, we apply an index</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">r</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">indexCreate</span><span class="p">(</span><span class="s1">&#39;locations&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">geo</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">})</span><span class="w"></span>
</pre></div>
</div>
<p>The example data format for such a table would then be</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">r</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">insert</span><span class="p">([</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Taunton&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">location</span><span class="o">:</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="mf">3.1349583</span><span class="p">,</span><span class="w"> </span><span class="mf">51.021485</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Bristol&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">location</span><span class="o">:</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2307308</span><span class="p">,</span><span class="w"> </span><span class="mf">51.0237906</span><span class="p">,)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">])</span><span class="w"></span>
</pre></div>
</div>
<p>Calculating the distance between these points:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">r</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="mf">1</span><span class="p">)(</span><span class="s1">&#39;location&#39;</span><span class="p">).</span><span class="nx">distance</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="s1">&#39;geo&#39;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="mf">2</span><span class="p">)(</span><span class="s1">&#39;location&#39;</span><span class="p">))</span><span class="w"></span>
</pre></div>
</div>
<p>or finding the nearest location to an arbitrary point</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="mf">3.651051</span><span class="p">,</span><span class="w"> </span><span class="mf">51.0234467</span><span class="p">);</span><span class="w">  </span><span class="c1">// Stonehenge</span><span class="w"></span>
<span class="nx">r</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">getNearest</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">index</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;location&#39;</span><span class="p">})</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="data-types">
<h3>Data types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h3>
<p>The data types supported for geospatial queries are</p>
<ul class="simple">
<li><p>points</p></li>
<li><p>lines</p></li>
<li><p>polygons (i.e. at least three points)</p></li>
</ul>
</div>
</div>
<div class="section" id="users-and-permissions">
<h2>Users and permissions<a class="headerlink" href="#users-and-permissions" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://rethinkdb.com/docs/permissions-and-accounts/">link to docs</a></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./databases"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="mongo-db.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using MongoDB</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="lang-drivers/py-mongo.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using MongoDB and Python</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Fergus Baker<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>