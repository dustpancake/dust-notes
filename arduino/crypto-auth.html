
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using the ECC0X08 with Arduino devices &#8212; notes</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/vollkorn.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/_static/styles.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MQTT Specifications" href="../mq-mqtt/mqtt-specs.html" />
    <link rel="prev" title="Arduino cookbook" href="arduino-cookbook.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../titlepage.html">
   notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Systems
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../nix-systems/index.html">
   *nix Systems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-installations.html">
     Software installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-sysadmin.html">
     System administration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-filesystem.html">
     Disk and filesystem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-networks.html">
     Networks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/nix-hardware.html">
     Hardware
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/boot-bios.html">
     Boot Loaders and BIOS control
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/systemd.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       systemd
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       journald
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../nix-systems/kernel.html">
     Linux Kernel Modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../bash/index.html">
   Bash scripting
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../bash/bash-reference.html">
     Bash reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bash/bash-cookbook.html">
     Bash cookbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../osx-reference.html">
   OSX Reference
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Programming Languages
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cpp/index.html">
   C++ and C
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/declarations.html">
     Declarations in C++
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/conan.html">
     Conan package manager
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/unit-testing.html">
     Unit testing with Catch2! and Trompeloeil
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/swig-cmake.html">
     Using SWIG with CMake
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/cmake.html">
     CMake notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cpp/member-functions.html">
     On using
     <code class="docutils literal notranslate">
      <span class="pre">
       std::function
      </span>
     </code>
     for member functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../julia/index.html">
   Julia Notes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/julia-intro.html">
     Julia learning notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/advent-notes/README.html">
     Advent of Code notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../julia/advent-notes/scopes.html">
     Julia Scopes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/py-recipes.html">
     Python recipes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/jupyter-ipython.html">
     Jupyter and iPython cheat sheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/regex.html">
     Regex in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/py-serial.html">
     Serial communication with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/high-perf.html">
     High performance Python techniques and paradigms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/c-wrapping.html">
     Wrapping C and C++ into Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/pypi-distribution.html">
     Making a project available on pypi
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/cpp-c-swig.html">
     Wrapping C/C++ code using SWIG
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/requests.html">
     Python
     <code class="docutils literal notranslate">
      <span class="pre">
       requests
      </span>
     </code>
     cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/using-flask.html">
     Using Python Flask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/rethink-db-with-flask.html">
     Using RethinkDB with Flask
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/flask/jinja-templating.html">
     Templating HTML pages with jinja
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/fast-api/using-fast-api.html">
     Using FastAPI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/mkdocs-notes.html">
     Notes on mkdocs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/scrapy.html">
     Scrapy
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../js/index.html">
   JavaScript
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/jest-testing.html">
     Using Jest testing framework
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/js-reference.html">
     JavaScript language reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/swig-nodejs.html">
     Using SWIG with NodeJS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/request-parsing.html">
     Making HTTP requests and parsing in JS and node.js
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/extensions/native-messaging.html">
     Native Messaging for Browser Extensions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../js/vue/over-vue.html">
     Vue Overview
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tex/index.html">
   LaTeX
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/latex-documents.html">
     Writing LaTeX documents
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/latexmk.html">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       latexmk
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/presentations.html">
     Making presentations in LaTeX
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tex/posters.html">
     Creating posters in LaTeX
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  DevOps
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../docker/index.html">
   Docker
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/minio-registry.html">
     Creating a persistent local registry with S3/MinIO
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-cheatsheet.html">
     Docker cheatsheet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/systemd-with-docker.html">
     Using Docker as
     <code class="docutils literal notranslate">
      <span class="pre">
       systemd
      </span>
     </code>
     services
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-compose.html">
     The magical world of Docker-Compose
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/dockerfile-recipes.html">
     Dockerfile cookbook
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../docker/docker-swarm.html">
     Docker Swarm
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../aws/index.html">
   Amazon Web Services
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/vpc-overview.html">
     VPC overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/setting-up.html">
     AWS Settup
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/ec2-with-docker.html">
     EC2 with Docker
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../aws/goofys-s3.html">
     Using Goofys with S3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vms/index.html">
   Virtual Machines
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/sun-virtual-box.html">
     Oracle Virtual Box
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/kvm.html">
     Kernel-based Virtual Machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vms/qemu.html">
     QEMU
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../databases/index.html">
   Databases
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../databases/node-red.html">
     NodeRed Notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../databases/mongo-db.html">
     Using MongoDB
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../databases/rethink-db.html">
     RethinkDB
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../databases/lang-drivers/py-mongo.html">
     Using MongoDB and Python
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Configurations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../configurations/shell-rc-profiles.html">
   Shell
   <code class="docutils literal notranslate">
    <span class="pre">
     .*rc
    </span>
   </code>
   and
   <code class="docutils literal notranslate">
    <span class="pre">
     .*profile
    </span>
   </code>
   configurations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../configurations/jupyter-notebook.html">
   Jupyter notebook
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../machine-learning/index.html">
   Machine Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../machine-learning/tf-install.html">
   Installing TensorFlow 2.0
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Raspi &amp; Arduino
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../raspi/index.html">
   Raspberry Pi
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/raspi-config.html">
     Configuring a Raspberry Pi from fresh install
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/raspi-bit-torrent.html">
     Setting up a Raspberry-Pi for secure bit torrenting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../raspi/pyaudio.html">
     Installing PyAudio on Raspberry Pi
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Arduino
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="platformio.html">
     PlatformIO notes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ca-certs-nano.html">
     Copying (root) CA certificates onto Arduino devices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="arduino-cookbook.html">
     Arduino cookbook
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Using the ECC0X08 with Arduino devices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mq-mqtt/mqtt-specs.html">
     MQTT Specifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mq-mqtt/nginx-load-balancing.html">
     Using NGiNX with Docker
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tools
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vim/index.html">
   VIM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/recipes.html">
     Vim Recipes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/vundle.html">
     Vundle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vim/batch-rename.html">
     Batch renaming in Vim
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../discord/index.html">
   Discord
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../discord/making-bots-python.html">
     Making Discord bots in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../discord/discord-music-hook.html">
     Creating a Discord music feed using webhooks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../git/index.html">
   Git and VCs
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../git/git-reference.html">
     Git Reference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../git/gitea-mariadb.html">
     Using Gitea with MariaDB
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vscode/index.html">
   VSCode
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vscode/publishing.html">
     Publishing a VSCode extension
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../recommended-talks.html">
   Recommended talks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../software-design-principles.html">
   Software Design Principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ffmpeg-cheatsheet.html">
   FFMPEG Cheatsheet
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../iptables-and-firewalls.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     iptables
    </span>
   </code>
   and firewall configuration reference.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ci-cd/jenkins-recipes.html">
   Jenkins Cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../security/openssl-cookbook.html">
   OpenSSL Cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../visualisation/blender-learning.html">
   Learning Blender
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../java/gradle-cookbook.html">
   Gradle build-tool cookbook
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../automation/mycroft-osx.html">
   Using Mycroft Docker images on OSX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nix-systems/clamav.html">
   Clam Anti-Virus
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/arduino/crypto-auth.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fjebaker/notes"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fjebaker/notes/issues/new?title=Issue%20on%20page%20%2Farduino/crypto-auth.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fjebaker/notes/edit/master/arduino/crypto-auth.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#available-libraries-and-specifications">
   Available libraries and specifications
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arduinoeccx08">
     ArduinoECCX08
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ecc608-data-sheets">
     ECC608 data sheets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-few-warnings">
     A few warnings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configuring-the-ecc608">
   Configuring the ECC608
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#configuring-aes-and-the-respective-key-slots">
     Configuring AES and the respective key slots
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slot-and-key-configuration-bytes">
     Slot and Key configuration bytes
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Using the ECC0X08 with Arduino devices</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#table-of-contents">
   Table of Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#available-libraries-and-specifications">
   Available libraries and specifications
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arduinoeccx08">
     ArduinoECCX08
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ecc608-data-sheets">
     ECC608 data sheets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-few-warnings">
     A few warnings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#configuring-the-ecc608">
   Configuring the ECC608
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#configuring-aes-and-the-respective-key-slots">
     Configuring AES and the respective key slots
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slot-and-key-configuration-bytes">
     Slot and Key configuration bytes
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="using-the-ecc0x08-with-arduino-devices">
<h1>Using the ECC0X08 with Arduino devices<a class="headerlink" href="#using-the-ecc0x08-with-arduino-devices" title="Permalink to this headline">¶</a></h1>
<p>Part of my ongoing IoT project is to utilize the ATECC608a embedded in the Arduino Nano 33 IoT micro controller. I outline my aims and list my guides in my <a class="reference external" href="https://github.com/fjebaker/MQTT-with-TLS">dedicated repository</a>, and will use these notes to document the exploration process.</p>
<!--BEGIN TOC-->
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p><a class="reference external" href="#available-libraries-and-specifications">Available libraries and specifications</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#arduinoeccx08">ArduinoECCX08</a></p></li>
<li><p><a class="reference external" href="#ecc608-data-sheets">ECC608 data sheets</a></p></li>
<li><p><a class="reference external" href="#a-few-warnings">A few warnings</a></p></li>
</ol>
</li>
<li><p><a class="reference external" href="#configuring-the-ecc608">Configuring the ECC608</a></p>
<ol class="simple">
<li><p><a class="reference external" href="#configuring-aes-and-the-respective-key-slots">Configuring AES and the respective key slots</a></p></li>
<li><p><a class="reference external" href="#slot-and-key-configuration-bytes">Slot and Key configuration bytes</a></p></li>
</ol>
</li>
</ol>
<!--END TOC-->
</div>
<div class="section" id="available-libraries-and-specifications">
<h2>Available libraries and specifications<a class="headerlink" href="#available-libraries-and-specifications" title="Permalink to this headline">¶</a></h2>
<p>The ATECC608a chip, developed by <a class="reference external" href="https://www.microchip.com/wwwproducts/en/ATECC608A">Microchip Tech</a> is an all encompassing improvement on their previous ATECC508, now supporting a secure boot feature, AES, and all sorts of performance enhancements. Unfortunately, the (summary) data sheet available on the <a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/ATECC608A-CryptoAuthentication-Device-Summary-Data-Sheet-DS40001977B.pdf">official website</a> is somewhat lackluster when it comes to working out how to interface with the device, beyond indicating that the ECC508 libraries will interface with the I2C in the same way, and that only <em>new</em> functionality has been added (the datasheet for the ATECC508 can be found <a class="reference external" href="https://content.arduino.cc/assets/mkr-microchip_atecc508a_cryptoauthentication_device_summary_datasheet-20005927a.pdf">here</a>.</p>
<p>Also indicated is the <a class="reference external" href="https://github.com/MicrochipTech/cryptoauthlib"><code class="docutils literal notranslate"><span class="pre">cryptoauthlib</span></code></a>, which is a generic library for interfacing with different cryptographic authentication chips made by Microchip Tech, for use with a full blown OS, as well as MCUs.</p>
<p>I had a good long go at trying to get <code class="docutils literal notranslate"><span class="pre">cryptoauthlib</span></code> to work satisfactorily on the Arduino Nano 33 IoT, but found it very difficult to interface with the chip, even when following essentially <a class="reference external" href="https://www.instructables.com/id/Secure-Communication-Arduino/">the only tutorial</a> I could find.</p>
<div class="section" id="arduinoeccx08">
<h3>ArduinoECCX08<a class="headerlink" href="#arduinoeccx08" title="Permalink to this headline">¶</a></h3>
<p>I searched on GitHub and found an Arduino library called <a class="reference external" href="https://github.com/arduino-libraries/ArduinoECCX08">ArduinoECCX08</a> for both the ATECC508 and ATECC608. This library worked with little adjustment on my Nano 33 IoT, but comes with very limited functionality – at the time of writing (August 2020), it only supports some of the ECC508 features</p>
<ul class="simple">
<li><p>random numbers</p></li>
<li><p>JWS signing</p></li>
<li><p>different sorts of certificate generation and validation</p></li>
<li><p>public/private key generation</p></li>
<li><p>SHA256 digests</p></li>
</ul>
<p>My particular interest lies in the secure boot, AES crypto, and key storage features in the ECC608, not currently present. <em>I have forked the repo</em> <strong><a class="reference external" href="https://github.com/fjebaker/ArduinoECCX08">fjebaker/ArduinoECCX08</a></strong>, and intend to implement those features myself soon. As such, these notes will act as a development log as well as their overview purpose.</p>
</div>
<div class="section" id="ecc608-data-sheets">
<h3>ECC608 data sheets<a class="headerlink" href="#ecc608-data-sheets" title="Permalink to this headline">¶</a></h3>
<p>After a lot of searching, I found two, more complete, data sheets for the ECC608</p>
<ul class="simple">
<li><p>an NDA protected <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf">preliminary data sheet</a></p></li>
<li><p>a Microchip Tech <a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/ATECC608A-TNGTLS-CryptoAuthentication-Data-Sheet-DS40002112B.pdf">full data sheet</a></p></li>
</ul>
<p>I use these as references for my implementations, and will refer to them heavily in the development logs.</p>
</div>
<div class="section" id="a-few-warnings">
<h3>A few warnings<a class="headerlink" href="#a-few-warnings" title="Permalink to this headline">¶</a></h3>
<p>Something to note is that development with the ECC608 can be very infuriating at times, since the majority of the chip’s functionality only becomes available after the configuration has been locked. <strong>Once the configuration is locked, it can never be unlocked.</strong></p>
<p>It can also be annoying, since the One Time Programmable (OTP) and Data stores can also be locked. <strong>Once the OTP &amp; Data stores are locked, they can never be unlocked.</strong></p>
<p>A mistake I made on my first exploration was executing code from the ArduinoECCX08 example, which called a <code class="docutils literal notranslate"><span class="pre">lock()</span></code> method. My intuition suggested this would only lock the config, but it locks <strong>both config and OTP/Data.</strong> My fork separates these methods, as I think, especially for newcomers, that function can be quite painful, and for most learning cases, you don’t need to lock the OTP/Data, and it is arguably a silly thing to do unless going into production.</p>
</div>
</div>
<div class="section" id="configuring-the-ecc608">
<h2>Configuring the ECC608<a class="headerlink" href="#configuring-the-ecc608" title="Permalink to this headline">¶</a></h2>
<p>These notes are explicitly for the ECC608, though the general technique is applicable for general ECCX08s.</p>
<p>Drawing from <a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/ATECC608A-TNGTLS-CryptoAuthentication-Data-Sheet-DS40002112B.pdf#_OPENTOPIC_TOC_PROCESSING_d137e1597">Section 2.1</a>, we see the device is configured by a 128 byte location in memory, which can be summarized as</p>
<table>
  <tr>
  	<td>Bytes 0 - 15</td>
  	<td>Read-only device information</td>
  </tr>
  <tr>
  	<td align="right">16 - 19</td>
  	<td>misc.</td>
  </tr>
  <tr>
  	<td align="right">20 - 51</td>
  	<td>Slot configurations</td>
  </tr>
  <tr>
  	<td align="right">52 - 85</td>
  	<td>misc.</td>
  </tr>
  <tr>
  	<td align="right">6</td>
  	<td>LockValue; related to data lock</td>
  </tr>
  <tr>
  	<td align="right">87</td>
  	<td>LockConfig; related to config lock</td>
  </tr>
  <tr>
  	<td align="right">88 - 89</td>
  	<td>Individual slot locks</td>
  </tr>
  <tr>
  	<td align="right">90 - 95</td>
  	<td>misc.</td>
  </tr>
  <tr>
  	<td align="right">96 - 127</td>
  	<td>Key configurations</td>
  </tr>
</table>
<p>Within the read-only section, there are a few important flag bytes. You can print the current configuration using the ArduinoECCX08 library, and the following sketch</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Arduino.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;ArduinoECCX08.h&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">printHex</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;0&quot;</span><span class="p">);}</span><span class="w"></span>
<span class="w">   </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">printArr</span><span class="p">(</span><span class="n">byte</span><span class="w"> </span><span class="n">arr</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printHex</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">ECCX08</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Failed to communicate with ECC508/ECC608!&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w">  </span>

<span class="w">    </span><span class="n">byte</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">ECCX08</span><span class="p">.</span><span class="n">readConfiguration</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Could not read configuration...&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">printArr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">	</span><span class="c1">// ...</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The output on my unused Arduino Nano 33 IoT, which I copied into an iPython console, was</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">01 23 3D E4 00 00 60 02 </span>
<span class="s2">AE 07 3B 91 EE 01 5D 00</span>
<span class="s2">C0 00 00 00 83 20 87 20  </span>
<span class="s2">8F 20 C4 8F 8F 8F 8F 8F    </span>
<span class="s2">9F 8F AF 8F 00 00 00 00    </span>
<span class="s2">00 00 00 00 00 00 00 00    </span>
<span class="s2">00 00 AF 8F FF FF FF FF    </span>
<span class="s2">00 00 00 00 FF FF FF FF     </span>
<span class="s2">00 00 00 00 00 00 00 00 </span>
<span class="s2">00 00 00 00 00 00 00 00 </span>
<span class="s2">00 00 00 00 00 00 55 55 </span>
<span class="s2">FF FF 00 00 00 00 00 00 </span>
<span class="s2">33 00 33 00 33 00 1C 00 </span>
<span class="s2">1C 00 1C 00 1C 00 1C 00 </span>
<span class="s2">3C 00 3C 00 3C 00 3C 00 </span>
<span class="s2">3C 00 3C 00 3C 00 1C 00 </span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>I then quickly wrote a few helper functions and parsed the configuration bytes with</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">parsed</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">toHex</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="k">def</span> <span class="nf">toBin</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">buf</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>
    <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">buf</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)))</span> <span class="o">+</span> <span class="n">res</span>

<span class="k">def</span> <span class="nf">gB</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">pprint</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">parsed</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Byte </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="n">toHex</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="n">toBin</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pprint</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">stop</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">pprint</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>I could now view each configuration byte (and range) in both hexadecimal and binary (NB: I cast to int, and then recast to hex in this approach – this was an oversight of not planning my code before writing it).</p>
<div class="section" id="configuring-aes-and-the-respective-key-slots">
<h3>Configuring AES and the respective key slots<a class="headerlink" href="#configuring-aes-and-the-respective-key-slots" title="Permalink to this headline">¶</a></h3>
<p>The first byte of interest is 13, as it tells us if AES is enabled on this chip (I use this as a sanity check so far)</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gB</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="go">Byte 13:</span>
<span class="go">  01</span>
<span class="go">  00000001</span>

</pre></div>
</div>
<p>And true enough, we have AES functionality. Very little else needs to be changed in this configuration step to enable us to store an AES key in the Data zone, and have enough debug functionality to read/write even after the configuration is locked. <strong>NB:</strong> although you need to lock the configuration to write an AES key, you will not be able to unlock the device again afterwards. Finish your full configuration, before committing.</p>
<p>I have included in my fork a configuration that extends the default TLS config to use and enables AES key storage under <a class="reference external" href="https://github.com/fjebaker/ArduinoECCX08/blob/master/src/utility/ECCX08DefaultAESConfig.h"><code class="docutils literal notranslate"><span class="pre">utility/ECCX08DefaultAESConfig.h</span></code></a>. This configuration enables slot 9 for debug AES keys, by setting the slot config bytes to</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="mh">0x07</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="w"></span>
</pre></div>
</div>
<p>and the key config bytes to</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="mh">0x1A</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="w"></span>
</pre></div>
</div>
<p>Let’s examine what that means.</p>
</div>
<div class="section" id="slot-and-key-configuration-bytes">
<h3>Slot and Key configuration bytes<a class="headerlink" href="#slot-and-key-configuration-bytes" title="Permalink to this headline">¶</a></h3>
<p>To understand what the slot and key configurations dictate, we need to refer to the preliminary data sheet <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf#%5B%7B%22num%22%3A43%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C32%2C727%2C0%5D">Section 2.2.10</a> and <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf#%5B%7B%22num%22%3A53%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C32%2C603%2C0%5D">Section 2.2.11</a> respectively. We learn that both the slot and key configurations are separated into 16 two-byte flags, each mapping the the 16 available data slots in progressive order. We thus examine the two-byte flags:</p>
<p>First, the <strong>Slot configuration</strong>:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:right head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:right"><p>0<br>- 3</p></td>
<td><p>Read Key</p></td>
<td><p>Multi use but generally:<br>bit 0: enable external signatures of arbitrary messages<br>bit 1: enable internal signatures through digest or key generation methods<br>bit 2: ECDH operation is permitted<br>bit 3: if disabled, ECDH master key is readable</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>4</p></td>
<td><p>No MAC</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: key stored may be used by all commands<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: key stored may not be used by MAC commands (i.e. key is for verification)</p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>5</p></td>
<td><p>Limited Use</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: No use limit<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Limited use, see <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf#%5B%7B%22num%22%3A86%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C32%2C379%2C0%5D"><code class="docutils literal notranslate"><span class="pre">Counter0</span></code></a></p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>6</p></td>
<td><p>Encrypt Read</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: Clear text reads permitted<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Reads will be encrypted, see specifications for details</p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>7</p></td>
<td><p>Is Secret</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: Does not contain secret information (key generation commands will fail on this slot)<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Contents secret, clear text and 4 byte read/write prohibited</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>8<br>- 15</p></td>
<td><p>Write Key and Config</p></td>
<td><p>See specification</p></td>
</tr>
</tbody>
</table>
<p>Translating the above <code class="docutils literal notranslate"><span class="pre">0x07</span> <span class="pre">0x0F</span> <span class="pre">-&gt;</span> <span class="pre">0x0F07</span></code>, we get</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">toBin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0F07&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span>
<span class="go">&#39;0000111100000111&#39;</span>
</pre></div>
</div>
<p>which we can read to mean</p>
<ul class="simple">
<li><p>enable external signatures</p></li>
<li><p>enable internal signatures</p></li>
<li><p>enable ECDH</p></li>
<li><p>ECDH master key readable</p></li>
<li><p>usable by all commands</p></li>
<li><p>Unlimited Use</p></li>
<li><p>Reads plain text</p></li>
<li><p>not secret</p></li>
</ul>
<p><strong>NB:</strong> 0th bit is right most.</p>
<p>This is my test configuration for the AES keys, as it allows for full sanity checks to ensure that what the device is doing is what I planned.</p>
<p>Now the <strong>Key configuration</strong> for the specific data slot:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:right head"><p>Bits</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:right"><p>0</p></td>
<td><p>Private</p></td>
<td><p>If set, designated that this slot contains a private key</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>1</p></td>
<td><p>Public Key Info</p></td>
<td><p>Depending on whether the key is private or not, will designate a different verification flag.</p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>2<br>- 4</p></td>
<td><p>Key Type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">000</span></code> - <code class="docutils literal notranslate"><span class="pre">011</span></code>: Reserved<br><code class="docutils literal notranslate"><span class="pre">100</span></code>: P256 NIST ECC Key<br><code class="docutils literal notranslate"><span class="pre">101</span></code>: Reserved<br><code class="docutils literal notranslate"><span class="pre">110</span></code>: AES Key<br><code class="docutils literal notranslate"><span class="pre">111</span></code>: SHA Key or Other<br></p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>5</p></td>
<td><p>Lockable</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: Slot is locked when Data locked<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Key is individually lockable, see <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf#%5B%7B%22num%22%3A53%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C32%2C603%2C0%5D">Section 2.4</a></p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>6</p></td>
<td><p>Requires Random Nonce</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: No Nonce required<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Nonce required</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>7</p></td>
<td><p>Requires Auth</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: No auth required<br><code class="docutils literal notranslate"><span class="pre">1</span></code>: Authentication required, see <a class="reference external" href="https://atecc608a.neocities.org/ATECC608A.pdf#%5B%7B%22num%22%3A53%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22XYZ%22%7D%2C32%2C603%2C0%5D">Section 4.4.8</a></p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>8<br>- 11</p></td>
<td><p>Auth Key</p></td>
<td><p>Must be <code class="docutils literal notranslate"><span class="pre">0000</span></code> if no auth required</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>12<br>- 15</p></td>
<td><p>Misc.</p></td>
<td><p>See specification</p></td>
</tr>
</tbody>
</table>
<p>Translating our <code class="docutils literal notranslate"><span class="pre">0x1A</span> <span class="pre">0x00</span> <span class="pre">-&gt;</span> <span class="pre">0x001A</span></code>, we obtain</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">toBin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;001A&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span>
<span class="go">&#39;0000000000011010&#39;</span>
</pre></div>
</div>
<p>which reads to configure this slot with</p>
<ul class="simple">
<li><p>public key</p></li>
<li><p>must be validated</p></li>
<li><p>AES Key</p></li>
</ul>
<p>A good summary of all of this is presented as specific implementations in the full data sheet, <a class="reference external" href="http://ww1.microchip.com/downloads/en/DeviceDoc/ATECC608A-TNGTLS-CryptoAuthentication-Data-Sheet-DS40002112B.pdf#_OPENTOPIC_TOC_PROCESSING_d137e3321">Section 2.2.4</a>. Also included there are good sample configurations for other keys and storages.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./arduino"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="arduino-cookbook.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Arduino cookbook</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../mq-mqtt/mqtt-specs.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">MQTT Specifications</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Fergus Baker<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>